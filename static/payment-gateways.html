<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Secure Payment - Reframe</title>
    <link rel="stylesheet" href="/static/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Bricolage+Grotesque:opsz,wght@12..96,200..800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,0,0" rel="stylesheet">
</head>
<body>
    <div class="container">
        <header class="app-header">
            <h1>Reframe</h1>
            <div class="user-info">
                <a class="btn btn-secondary" href="/payment">Back to Plans</a>
            </div>
        </header>

        <div class="main-content">
            <section class="payment-section">
                <div class="plan-summary">
                    <h3>Selected Plan: <span id="selected-plan-name">-</span></h3>
                    <div class="plan-price">₹<span id="selected-plan-price">-</span></div>
                    <p class="section-subtitle" style="margin-top:8px;">Secure payment powered by industry-leading gateways</p>
                </div>

                <div class="gateway-grid" id="gateway-grid">
                    <div class="gateway-card">
                        <div class="gateway-row">
                            <div class="gateway-icon"><span class="material-symbols-rounded">credit_card</span></div>
                            <div>
                                <div class="gateway-title">Credit / Debit Card</div>
                                <div class="gateway-description">Accept major cards via a secure, PCI-compliant checkout.</div>
                            </div>
                        </div>
                        <button class="gateway-button" id="pay-card">Pay with Card</button>
                    </div>

                    <div class="gateway-card">
                        <div class="gateway-row">
                            <div class="gateway-icon"><span class="material-symbols-rounded">account_balance</span></div>
                            <div>
                                <div class="gateway-title">Net Banking</div>
                                <div class="gateway-description">Redirect to your bank for a secure transfer.</div>
                            </div>
                        </div>
                        <button class="gateway-button" id="pay-netbanking">Pay via Net Banking</button>
                    </div>

                    <div class="gateway-card">
                        <div class="gateway-row">
                            <div class="gateway-icon"><span class="material-symbols-rounded">smartphone</span></div>
                            <div>
                                <div class="gateway-title">UPI</div>
                                <div class="gateway-description">Instant payments using UPI apps and QR flows.</div>
                            </div>
                        </div>
                        <button class="gateway-button" id="pay-upi">Pay with UPI</button>
                    </div>

                    <div class="gateway-card">
                        <div class="gateway-row">
                            <div class="gateway-icon"><span class="material-symbols-rounded">language</span></div>
                            <div>
                                <div class="gateway-title">PayPal</div>
                                <div class="gateway-description">Fast checkout with your PayPal account.</div>
                            </div>
                        </div>
                        <button class="gateway-button" id="pay-paypal">Pay with PayPal</button>
                    </div>
                </div>

                <div class="security-notice">
                    <strong>Payment security</strong>
                    <div style="margin-top:8px;">We use bank-grade encryption and comply with PCI-DSS standards.</div>
                </div>
            </section>
        </div>
    </div>

    <script>
    (function(){
        function getQueryParam(name){ const params = new URLSearchParams(window.location.search); return params.get(name); }

        const plan = getQueryParam('plan') || 'starter';
        const planNames = { starter: 'Starter', pro: 'Professional' };
        const planPrices = { starter: '499', pro: '1,499' };

        document.getElementById('selected-plan-name').textContent = planNames[plan] || 'Starter';
        document.getElementById('selected-plan-price').textContent = planPrices[plan] || '499';

        function showProcessing(button){ const original = button.textContent; button.textContent = 'Processing...'; button.disabled = true; return () => { button.textContent = original; button.disabled = false; }; }

        function selectGateway(method){
            const amount = planPrices[plan] || '499';
            const planName = planNames[plan] || 'Starter';
            const button = document.getElementById(`pay-${method}`);
            if(!button) return;
            const restore = showProcessing(button);

            // Simulated redirect/demo handler - replace with real gateway integration
            setTimeout(() => {
                alert(`${method.toUpperCase()} gateway: proceeding to pay ₹${amount} for the ${planName} plan.\n\nThis is a demo.`);
                restore();
            }, 1000);
        }

        ['card','netbanking','upi','paypal'].forEach(m => {
            const el = document.getElementById(`pay-${m}`);
            if(el) el.addEventListener('click', (e) => { e.preventDefault(); selectGateway(m); });
        });
    })();
    </script>
</body>
</html>

